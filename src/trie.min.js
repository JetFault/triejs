if(typeof exports==="undefined"){var exports={}}(function(b){var a=function(d){this.options={maxCache:10,enableCache:true,insert:null,sort:null,clip:null,copy:null};this.root={};for(var c in d){if(d.hasOwnProperty(c)){this.options[c]=d[c]}}if(typeof this.options.insert!="function"){this.options.insert=function(f,e){if(f.length){f.push(e)}else{f=[e]}return f}}if(typeof this.options.sort!="function"){this.options.sort=function(){this.sort()}}if(typeof this.options.clip!="function"){this.options.clip=function(e){if(this.length>e){this.splice(0,this.length-e)}}}if(typeof this.options.copy!="function"){this.options.copy=function(e){return e.slice(0)}}};a.prototype={_addCacheData:function(d,c){if(d==this.root||this.options.enableCache===false){return}if(!d.data){d.data={}}d.data=this.options.insert.call(this,d.data,c);this.options.sort.call(d.data);this.options.clip.call(d.data,this.options.maxCache)},_addSuffix:function(h,f,g){var e=h.charAt(0),c=h.substring(1)||null,d={data:{}};if(c){d.suffix=c}g[e]=d;g[e].data=this.options.insert.call(this,g[e].data,f)},_moveSuffix:function(h,f,g){var e=h.charAt(0),c=h.substring(1)||null,d={data:{}};if(c){d.suffix=c}g[e]=d;g[e].data=this.options.copy(f)},addWord:function(h,f){if(typeof h!="string"){return false}h=h.toLowerCase();var g=this.root;for(var c=0,d=h.length;c<d;c++){var e=h.charAt(c);if(!g[e]){if(g.suffix){this._moveSuffix(g.suffix,g.data,g);delete g.suffix;if(this.options.enableCache===false){delete g.data}}if(!g[e]){this._addSuffix(h.substring(c),f,g);this._addCacheData(g,f);break}this._addCacheData(g,f);if(c==d-1){if(g[e].suffix){this._moveSuffix(g[e].suffix,g[e].data,g[e]);delete g[e].suffix;if(this.options.enableCache===false){delete g[e].data}}this._addCacheData(g[e],f)}g=g[e]}else{if(c==d-1){this._addCacheData(g,f);this._addCacheData(g[e],f)}else{this._addCacheData(g,f);g=g[e]}}}},getPrefix:function(f){if(typeof f!=="string"){return undefined}f=f.toLowerCase();var g=this.root;for(var c=0,d=f.length;c<d;c++){var e=f.charAt(c);if(!g[e]){if(g.suffix&&g.suffix.indexOf(f.substring(c))==0){return this.options.enableCache?g.data:this.getSubtree(g)}else{return undefined}}else{g=g[e]}}return this.options.enableCache?g.data:this.getSubtree(g)},getSubtree:function(j){var e=[],h=[j],g;while(g=h.pop()){for(var d in g){if(g.hasOwnProperty(d)){if(d=="data"){for(var c=0,f=g.data.length;c<f;c++){e=this.options.insert.call(this,e,g.data[c]);this.options.sort.call(e);this.options.clip.call(e,this.options.maxCache)}}else{if(d!="suffix"){h.push(g[d])}}}}}return e}};b.Triejs=a})(exports);